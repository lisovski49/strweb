<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Database</title>
</head>
<body>
<h1>Личная база фильмов</h1>
<div id="movieTable"></div>

<script>
    // 1) Запрашиваем количество просмотренных фильмов
    const numberOfFilms = prompt('Сколько фильмов вы уже посмотрели?');

    // 2) Создаем объект personalMovieDB
    const personalMovieDB = {
        count: numberOfFilms,
        movies: {}
    };

    // 3) Запрашиваем данные о фильмах
    for (let i = 0; i < 2; i++) {
        let movie;
        let rating;

        // Проверяем корректность ввода названия фильма
        while (true) {
            movie = prompt('Один из последних просмотренных фильмов?');
            if (movie && movie.length <= 50) {
                break;
            }
            alert('Введите корректное название фильма (не пустое и не длиннее 50 символов).');
        }

        // Проверяем корректность ввода оценки
        while (true) {
            rating = prompt('На сколько оцените его?');
            if (rating && !isNaN(rating)) {
                break;
            }
            alert('Введите корректную оценку.');
        }

        // 5) Записываем данные в объект movies
        personalMovieDB.movies[movie] = rating;
    }

    // 6) Выводим объект personalMovieDB в консоль
    console.log(personalMovieDB);

    // 7) Функция для вывода объекта movies в виде таблицы на страницу
    function displayMovies(movies) {
        const table = document.createElement('table');
        const headerRow = document.createElement('tr');
        const headerMovie = document.createElement('th');
        const headerRating = document.createElement('th');

        headerMovie.textContent = 'Название фильма';
        headerRating.textContent = 'Оценка';
        headerRow.appendChild(headerMovie);
        headerRow.appendChild(headerRating);
        table.appendChild(headerRow);

        for (const [movie, rating] of Object.entries(movies)) {
            const row = document.createElement('tr');
            const cellMovie = document.createElement('td');
            const cellRating = document.createElement('td');

            cellMovie.textContent = movie;
            cellRating.textContent = rating;

            row.appendChild(cellMovie);
            row.appendChild(cellRating);
            table.appendChild(row);
        }

        document.getElementById('movieTable').appendChild(table);
    }

    // Вызываем функцию для отображения фильмов
    displayMovies(personalMovieDB.movies);
</script>
</body>
</html>